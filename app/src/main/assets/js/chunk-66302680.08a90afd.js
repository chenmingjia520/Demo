(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66302680"],{"0b9c":function(e,t,r){"use strict";var a=r("2005"),i=r.n(a);i.a},2005:function(e,t,r){},"9ed6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"main"},[r("a-form",{ref:"formLogin",staticClass:"user-layout-login",attrs:{id:"formLogin",form:e.form},on:{submit:e.handleSubmit}},[e.isLoginError?r("a-alert",{staticStyle:{"margin-bottom":"24px"},attrs:{type:"error",showIcon:"",message:"账户或密码错误"}}):e._e(),r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:"请输入帐户名或邮箱地址"},{validator:e.handleUsernameOrEmail}],validateTrigger:"change"}],expression:"['username',\n                    {rules: [{ required: true, message: '请输入帐户名或邮箱地址' },\n                    { validator: handleUsernameOrEmail }], validateTrigger: 'change'}]"}],attrs:{size:"large",type:"text",placeholder:"请输入账号"},on:{change:function(t){e.isLoginError=!1}}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),r("a-form-item",[r("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"}],validateTrigger:"blur"}],expression:"['password',\n                    {rules: [{ required: true, message: '请输入密码' }], validateTrigger: 'blur'}]"}],attrs:{size:"large",placeholder:"请输入密码"},on:{change:function(t){e.isLoginError=!1}}},[r("a-icon",{style:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),r("a-form-item",{staticStyle:{"margin-top":"24px"}},[r("a-button",{staticClass:"login-button",attrs:{size:"large",type:"primary",htmlType:"submit",loading:e.state.loginBtn,disabled:e.state.loginBtn}},[e._v(" 确 定 ")])],1)],1)],1)])},i=[],s=(r("d3b7"),r("c8c2")),n=r("ed08"),o={data:function(){return{loginBtn:!1,loginType:0,isLoginError:!1,form:this.$form.createForm(this),state:{time:60,loginBtn:!1,loginType:0,smsSendBtn:!1}}},methods:{handleUsernameOrEmail:function(e,t,r){var a=this.state,i=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((\.[a-zA-Z0-9_-]{2,3}){1,2})$/;i.test(t)?a.loginType=0:a.loginType=1,r()},handleSubmit:function(e){var t=this;e.preventDefault(),this.isLoginError=!1;var r=this.form.validateFields,a=this.state;a.loginBtn=!0,r((function(e,r){if(e)setTimeout((function(){a.loginBtn=!1}),600);else{var i=r.username,o=r.password;Object(s["b"])(i,o).then((function(e){t.$store.dispatch("user/setToken",Object(n["c"])()),t.isLoginError=!1,t.$message.success("登录成功！"),setTimeout((function(){t.$router.push({path:"/home"})}),1e3)})).catch((function(){t.isLoginError=!0})).finally((function(){a.loginBtn=!1}))}}))}}},l=o,c=(r("0b9c"),r("2877")),u=Object(c["a"])(l,a,i,!1,null,"4ab78afa",null);t["default"]=u.exports}}]);